import{r as k,g as D}from"./phaser-DFK5Ua9d.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var T=k();const r=D(T);class w extends r.Scene{constructor(){super({key:"BootScene"})}preload(){this.load.on("complete",()=>{this.scene.start("PreloadScene")})}create(){this.scale.refresh(),this.scene.start("PreloadScene")}}class C extends r.Scene{constructor(){super({key:"PreloadScene"})}preload(){const e=this.cameras.main.width,t=this.cameras.main.height,i=this.add.graphics(),s=this.add.graphics();s.fillStyle(2236962,.8),s.fillRect(e/2-160,t/2-25,320,50);const o=this.add.text(e/2,t/2-50,"Loading...",{font:"20px monospace",fill:"#ffffff"}).setOrigin(.5,.5);this.load.on("progress",a=>{i.clear(),i.fillStyle(16766720,1),i.fillRect(e/2-150,t/2-15,300*a,30)}),this.load.on("complete",()=>{i.destroy(),s.destroy(),o.destroy()})}create(){this.generateSprites(),this.scene.start("MenuScene")}generateSprites(){this.generateCatSprite(),this.generateTiles(),this.generateHookPoint(),this.generateCollectibles(),this.generateEnemies(),this.generateUIElements(),this.generateParticles()}generateCatSprite(){const t=this.make.graphics({x:0,y:0,add:!1});this.drawCat(t,0,0,"idle"),t.generateTexture("cat_idle",16,16),t.destroy();for(let l=0;l<2;l++){const h=this.make.graphics({x:0,y:0,add:!1});this.drawCat(h,0,0,"run",l),h.generateTexture(`cat_run_${l}`,16,16),h.destroy()}const i=this.make.graphics({x:0,y:0,add:!1});this.drawCat(i,0,0,"jump"),i.generateTexture("cat_jump",16,16),i.destroy();const s=this.make.graphics({x:0,y:0,add:!1});this.drawCat(s,0,0,"fall"),s.generateTexture("cat_fall",16,16),s.destroy();const o=this.make.graphics({x:0,y:0,add:!1});this.drawCat(o,0,0,"hook"),o.generateTexture("cat_hook",16,16),o.destroy();const a=this.make.graphics({x:0,y:0,add:!1});this.drawCat(a,0,0,"hurt"),a.generateTexture("cat_hurt",16,16),a.destroy()}drawCat(e,t,i,s,o=0){const a={raincoat:16766720,raincoatDark:14329120,mask:2960685,face:16758465,eyes:65280,ears:16752762};e.fillStyle(a.raincoat),e.fillRect(t+4,i+6,8,8),e.fillRect(t+3,i+7,10,6),e.fillStyle(a.raincoatDark),e.fillRect(t+4,i+12,8,2),e.fillRect(t+3,i+10,1,3),e.fillRect(t+12,i+10,1,3),e.fillStyle(a.raincoat),e.fillRect(t+5,i+3,6,4),e.fillStyle(a.ears),e.fillRect(t+4,i+2,2,2),e.fillRect(t+10,i+2,2,2),e.fillStyle(a.face),e.fillRect(t+6,i+5,4,3),e.fillStyle(a.mask),e.fillRect(t+5,i+4,6,2),e.fillStyle(a.eyes),e.fillRect(t+6,i+4,1,1),e.fillRect(t+9,i+4,1,1),e.fillStyle(16738740),e.fillRect(t+7,i+6,2,1),e.fillStyle(a.raincoatDark),s==="idle"?(e.fillRect(t+5,i+14,2,2),e.fillRect(t+9,i+14,2,2)):s==="run"?o===0?(e.fillRect(t+4,i+14,2,2),e.fillRect(t+10,i+13,2,2)):(e.fillRect(t+4,i+13,2,2),e.fillRect(t+10,i+14,2,2)):s==="jump"?(e.fillRect(t+4,i+13,2,2),e.fillRect(t+10,i+13,2,2)):s==="fall"?(e.fillRect(t+3,i+14,2,2),e.fillRect(t+11,i+14,2,2)):s==="hook"?(e.fillRect(t+5,i+14,2,2),e.fillRect(t+9,i+14,2,2),e.fillStyle(a.raincoat),e.fillRect(t+13,i+7,3,2)):s==="hurt"&&(e.fillRect(t+3,i+13,2,2),e.fillRect(t+11,i+13,2,2),e.fillStyle(16711680),e.fillRect(t+6,i+4,1,1),e.fillRect(t+9,i+4,1,1))}generateTiles(){const t=this.make.graphics({x:0,y:0,add:!1});t.fillStyle(4881443),t.fillRect(0,0,16,16),t.fillStyle(6134315),t.fillRect(0,0,16,4),t.fillStyle(4023840),t.fillRect(0,12,16,4),t.fillStyle(8110147);for(let f=0;f<4;f++)t.fillRect(f*4+1,0,2,2);t.generateTexture("tile_ground",16,16),t.destroy();const i=this.make.graphics({x:0,y:0,add:!1});i.fillStyle(9127187),i.fillRect(0,0,16,16),i.fillStyle(7025936),i.fillRect(2,3,3,3),i.fillRect(10,8,4,3),i.fillRect(5,12,3,2),i.generateTexture("tile_dirt",16,16),i.destroy();const s=this.make.graphics({x:0,y:0,add:!1});s.fillStyle(8421504),s.fillRect(0,0,16,16),s.fillStyle(6908265),s.fillRect(0,0,7,7),s.fillRect(8,8,8,8),s.fillStyle(5263440),s.fillRect(7,0,1,16),s.fillRect(0,7,16,1),s.generateTexture("tile_stone",16,16),s.destroy();const o=this.make.graphics({x:0,y:0,add:!1});o.fillStyle(13468991),o.fillRect(0,0,16,6),o.fillStyle(10506797),o.fillRect(0,4,16,2),o.fillStyle(9127187),o.fillRect(3,0,1,6),o.fillRect(11,0,1,6),o.generateTexture("tile_platform",16,6),o.destroy();const a=this.make.graphics({x:0,y:0,add:!1});a.fillStyle(12632256);for(let f=0;f<4;f++){const u=f*4;a.fillTriangle(u,16,u+2,4,u+4,16)}a.fillStyle(8421504);for(let f=0;f<4;f++){const u=f*4;a.fillRect(u+1,6,2,2)}a.generateTexture("tile_spike",16,16),a.destroy();const l=this.make.graphics({x:0,y:0,add:!1});l.fillStyle(9127187),l.fillRect(2,0,3,24),l.fillStyle(16729156),l.fillRect(5,2,10,8),l.fillStyle(13369344),l.fillRect(5,8,10,2),l.generateTexture("checkpoint",16,24),l.destroy();const h=this.make.graphics({x:0,y:0,add:!1});h.fillStyle(9127187),h.fillRect(2,0,3,24),h.fillStyle(4521796),h.fillRect(5,2,10,8),h.fillStyle(52224),h.fillRect(5,8,10,2),h.generateTexture("checkpoint_active",16,24),h.destroy();const n=this.make.graphics({x:0,y:0,add:!1});n.fillStyle(16766720),n.fillRect(2,0,4,32),n.fillStyle(16777215),n.fillRect(6,2,12,10),n.fillStyle(0);for(let f=0;f<5;f++)for(let u=0;u<6;u++)(f+u)%2===0&&n.fillRect(6+u*2,2+f*2,2,2);n.generateTexture("finish",20,32),n.destroy();const c=this.make.graphics({x:0,y:0,add:!1});c.fillStyle(8900331),c.fillRect(0,0,64,64),c.fillStyle(16777215),c.fillCircle(16,20,8),c.fillCircle(24,18,10),c.fillCircle(32,22,7),c.fillCircle(48,40,6),c.fillCircle(54,38,8),c.generateTexture("bg_sky",64,64),c.destroy()}generateHookPoint(){const t=this.make.graphics({x:0,y:0,add:!1});t.fillStyle(16766720),t.fillCircle(8,8,6),t.fillStyle(16772235),t.fillCircle(6,6,2),t.fillStyle(12092939),t.fillCircle(10,10,2),t.lineStyle(2,14329120),t.strokeCircle(8,8,5),t.generateTexture("hook_point",16,16),t.destroy();const i=this.make.graphics({x:0,y:0,add:!1});i.fillStyle(65280),i.fillCircle(8,8,8),i.fillStyle(16766720),i.fillCircle(8,8,6),i.fillStyle(16772235),i.fillCircle(6,6,2),i.generateTexture("hook_point_highlight",16,16),i.destroy();const s=this.make.graphics({x:0,y:0,add:!1});s.fillStyle(12632256),s.fillTriangle(0,4,8,0,8,8),s.fillStyle(8421504),s.fillRect(6,2,4,4),s.generateTexture("hook_projectile",10,8),s.destroy()}generateCollectibles(){const e=this.make.graphics({x:0,y:0,add:!1});e.fillStyle(49151),e.fillTriangle(6,0,0,10,12,10),e.fillCircle(6,10,6),e.fillStyle(8900331),e.fillCircle(4,8,2),e.generateTexture("raindrop",12,16),e.destroy();const t=this.make.graphics({x:0,y:0,add:!1});t.fillStyle(16766720);const i=8,s=8,o=7,a=3,l=[];for(let h=0;h<10;h++){const n=h%2===0?o:a,c=h*Math.PI/5-Math.PI/2;l.push(i+n*Math.cos(c)),l.push(s+n*Math.sin(c))}t.fillPoints(l,!0),t.fillStyle(16772235),t.fillCircle(6,6,2),t.generateTexture("secret_star",16,16),t.destroy()}generateEnemies(){for(let t=0;t<2;t++){const i=this.make.graphics({x:0,y:0,add:!1}),s=t===0?0:2;i.fillStyle(10040012),i.fillEllipse(8,10+s,14,10-s),i.fillStyle(12211667),i.fillEllipse(8,8+s,10,6-s),i.fillStyle(16777215),i.fillCircle(5,8+s,2),i.fillCircle(11,8+s,2),i.fillStyle(0),i.fillCircle(5,8+s,1),i.fillCircle(11,8+s,1),i.generateTexture(`enemy_slime_${t}`,16,16),i.destroy()}for(let t=0;t<2;t++){const i=this.make.graphics({x:0,y:0,add:!1});i.fillStyle(2263842),i.fillEllipse(8,10,12,8),i.fillStyle(3329330),i.fillEllipse(8,8,10,6),i.fillStyle(25600),i.fillRect(7,5,2,8),i.fillStyle(16711680),i.fillCircle(4,7,2),i.fillCircle(12,7,2),i.fillStyle(2263842);const s=t===0?0:1;i.fillRect(2,12+s,2,3),i.fillRect(6,13-s,2,3),i.fillRect(8,12+s,2,3),i.fillRect(12,13-s,2,3),i.generateTexture(`enemy_bug_${t}`,16,16),i.destroy()}}generateUIElements(){const e=this.make.graphics({x:0,y:0,add:!1});e.fillStyle(4868682),e.fillRoundedRect(0,0,120,40,8),e.fillStyle(6974058),e.fillRoundedRect(2,2,116,36,6),e.generateTexture("button",120,40),e.destroy();const t=this.make.graphics({x:0,y:0,add:!1});t.fillStyle(16766720),t.fillRoundedRect(0,0,120,40,8),t.fillStyle(9079434),t.fillRoundedRect(2,2,116,36,6),t.generateTexture("button_hover",120,40),t.destroy();const i=this.make.graphics({x:0,y:0,add:!1});i.fillStyle(2960685,.9),i.fillRoundedRect(0,0,200,150,10),i.lineStyle(3,16766720),i.strokeRoundedRect(0,0,200,150,10),i.generateTexture("panel",200,150),i.destroy();const s=this.make.graphics({x:0,y:0,add:!1});s.fillStyle(16711680),s.fillCircle(5,5,4),s.fillCircle(11,5,4),s.fillTriangle(1,6,8,15,15,6),s.generateTexture("heart",16,16),s.destroy()}generateParticles(){const e=this.make.graphics({x:0,y:0,add:!1});e.fillStyle(13808780),e.fillCircle(2,2,2),e.generateTexture("particle_dust",4,4),e.destroy();const t=this.make.graphics({x:0,y:0,add:!1});t.fillStyle(16777215),t.fillRect(2,0,2,6),t.fillRect(0,2,6,2),t.generateTexture("particle_sparkle",6,6),t.destroy();const i=this.make.graphics({x:0,y:0,add:!1});i.fillStyle(9127187),i.fillRect(0,0,4,4),i.generateTexture("hook_line",4,4),i.destroy()}}class v extends r.Scene{constructor(){super({key:"MenuScene"})}create(){const{width:e,height:t}=this.cameras.main;this.cameras.main.setBackgroundColor(1710638),this.createBackgroundElements();const i=this.add.text(e/2,80,"RAINCOAT CAT",{fontSize:"48px",fontFamily:"monospace",color:"#ffd700",stroke:"#000000",strokeThickness:6}).setOrigin(.5);this.add.text(e/2,120,"A Grappling Hook Adventure",{fontSize:"16px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);const s=this.add.image(e/2,180,"cat_idle").setScale(4);this.tweens.add({targets:s,y:190,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.createButton(e/2,250,"PLAY",()=>{window.gameState.currentLevel=1,window.gameState.score=0,window.gameState.totalDrops=0,window.gameState.totalSecrets=0,window.gameState.levelStats=[],this.scene.start("GameScene")}),this.createButton(e/2,300,"CONTROLS",()=>{this.scene.start("ControlsScene")}),this.add.text(e/2,t-20,"Made with Phaser 3",{fontSize:"12px",fontFamily:"monospace",color:"#666666"}).setOrigin(.5),this.tweens.add({targets:i,scaleX:1.05,scaleY:1.05,duration:2e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}createBackgroundElements(){for(let e=0;e<15;e++){const t=this.add.image(r.Math.Between(50,590),r.Math.Between(-50,360),"raindrop").setScale(1.5).setAlpha(.3);this.tweens.add({targets:t,y:400,duration:r.Math.Between(3e3,6e3),repeat:-1,onRepeat:()=>{t.x=r.Math.Between(50,590),t.y=-20}})}for(let e=0;e<5;e++){const t=this.add.image(r.Math.Between(100,540),r.Math.Between(50,310),"hook_point").setScale(2).setAlpha(.2);this.tweens.add({targets:t,y:t.y+20,duration:r.Math.Between(2e3,3e3),yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}}createButton(e,t,i,s){const o=this.add.image(e,t,"button").setInteractive(),a=this.add.text(e,t,i,{fontSize:"20px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);return o.on("pointerover",()=>{o.setTexture("button_hover"),a.setColor("#ffd700"),this.tweens.add({targets:[o,a],scaleX:1.1,scaleY:1.1,duration:100})}),o.on("pointerout",()=>{o.setTexture("button"),a.setColor("#ffffff"),this.tweens.add({targets:[o,a],scaleX:1,scaleY:1,duration:100})}),o.on("pointerdown",()=>{this.tweens.add({targets:[o,a],scaleX:.95,scaleY:.95,duration:50,yoyo:!0,onComplete:s})}),{button:o,buttonText:a}}}class b{constructor(e){this.scene=e,this.audioContext=null,this.enabled=!0,this.volume=.3;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch{console.warn("Web Audio API not supported"),this.enabled=!1}}resume(){this.audioContext&&this.audioContext.state==="suspended"&&this.audioContext.resume()}playTone(e,t,i="square",s=this.volume){if(!this.enabled||!this.audioContext)return;this.resume();const o=this.audioContext.createOscillator(),a=this.audioContext.createGain();o.connect(a),a.connect(this.audioContext.destination),o.type=i,o.frequency.setValueAtTime(e,this.audioContext.currentTime),a.gain.setValueAtTime(s,this.audioContext.currentTime),a.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),o.start(this.audioContext.currentTime),o.stop(this.audioContext.currentTime+t)}playNoise(e,t=this.volume*.5){if(!this.enabled||!this.audioContext)return;this.resume();const i=this.audioContext.sampleRate*e,s=this.audioContext.createBuffer(1,i,this.audioContext.sampleRate),o=s.getChannelData(0);for(let h=0;h<i;h++)o[h]=Math.random()*2-1;const a=this.audioContext.createBufferSource(),l=this.audioContext.createGain();a.buffer=s,a.connect(l),l.connect(this.audioContext.destination),l.gain.setValueAtTime(t,this.audioContext.currentTime),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+e),a.start()}playJump(){this.playTone(200,.1,"square",this.volume*.4),setTimeout(()=>this.playTone(300,.1,"square",this.volume*.3),50)}playLand(){this.playNoise(.05,this.volume*.3)}playCollect(){this.playTone(800,.1,"sine",this.volume*.5),setTimeout(()=>this.playTone(1e3,.15,"sine",this.volume*.4),50)}playSecret(){this.playTone(600,.1,"sine",this.volume*.5),setTimeout(()=>this.playTone(800,.1,"sine",this.volume*.5),100),setTimeout(()=>this.playTone(1e3,.2,"sine",this.volume*.5),200)}playHookFire(){this.playTone(150,.1,"sawtooth",this.volume*.4),this.playNoise(.05,this.volume*.2)}playHookAttach(){this.playTone(400,.1,"square",this.volume*.4),this.playTone(500,.15,"square",this.volume*.3)}playHookRelease(){this.playTone(300,.1,"square",this.volume*.3),setTimeout(()=>this.playTone(200,.1,"square",this.volume*.2),50)}playHurt(){this.playTone(200,.1,"sawtooth",this.volume*.5),setTimeout(()=>this.playTone(150,.15,"sawtooth",this.volume*.4),100)}playDeath(){this.playTone(400,.1,"square",this.volume*.5),setTimeout(()=>this.playTone(300,.1,"square",this.volume*.4),100),setTimeout(()=>this.playTone(200,.1,"square",this.volume*.3),200),setTimeout(()=>this.playTone(100,.2,"square",this.volume*.2),300)}playCheckpoint(){this.playTone(500,.1,"sine",this.volume*.5),setTimeout(()=>this.playTone(700,.1,"sine",this.volume*.5),100),setTimeout(()=>this.playTone(600,.2,"sine",this.volume*.4),200)}playLevelComplete(){[523,659,784,1047].forEach((t,i)=>{setTimeout(()=>this.playTone(t,.2,"sine",this.volume*.5),i*150)})}playClick(){this.playTone(600,.05,"square",this.volume*.3)}playStomp(){this.playTone(300,.1,"square",this.volume*.4),this.playNoise(.05,this.volume*.3)}toggle(){return this.enabled=!this.enabled,this.enabled}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}}let S=null;function x(p){return S||(S=new b(p)),S}class R extends r.Physics.Arcade.Sprite{constructor(e,t,i){super(e,t,i,"cat_idle"),e.add.existing(this),e.physics.add.existing(this),this.setCollideWorldBounds(!1),this.body.setSize(12,14),this.body.setOffset(2,2),this.setScale(1),this.moveSpeed=150,this.jumpForce=-280,this.maxJumpHoldTime=150,this.isJumping=!1,this.jumpHoldTime=0,this.canJump=!0,this.facingRight=!0,this.isDead=!1,this.isHurt=!1,this.coyoteTime=120,this.coyoteTimer=0,this.wasOnGround=!1,this.jumpBufferTime=100,this.jumpBufferTimer=0,this.hookState="ready",this.hookCooldown=500,this.hookCooldownTimer=0,this.hookMaxLength=300,this.hookSpeed=600,this.pullSpeed=400,this.hookTarget=null,this.hookLine=null,this.hookProjectile=null,this.hookDirection=new r.Math.Vector2(1,0),this.groundTouchesSinceHook=0,this.hookCombo=0,this.cursors=e.input.keyboard.createCursorKeys(),this.keys=e.input.keyboard.addKeys({w:r.Input.Keyboard.KeyCodes.W,a:r.Input.Keyboard.KeyCodes.A,s:r.Input.Keyboard.KeyCodes.S,d:r.Input.Keyboard.KeyCodes.D,space:r.Input.Keyboard.KeyCodes.SPACE,e:r.Input.Keyboard.KeyCodes.E,r:r.Input.Keyboard.KeyCodes.R}),e.input.on("pointerdown",s=>{s.leftButtonDown()?this.fireHook():s.rightButtonDown()&&this.cancelHook()}),e.input.keyboard.on("keydown-E",()=>{this.hookState==="ready"?this.fireHook():this.cancelHook()}),this.hookLineGraphics=e.add.graphics(),this.hookLineGraphics.setDepth(5),this.dustEmitter=e.add.particles(0,0,"particle_dust",{speed:{min:20,max:50},angle:{min:180,max:360},scale:{start:1,end:0},lifespan:300,gravityY:100,emitting:!1}),this.gameScene=e,this.sound=x(e)}update(e,t){this.isDead||(this.updateTimers(t),this.handleMovement(),this.handleJump(t),this.handleHookAiming(),this.updateHook(t),this.updateAnimation(),this.body.onFloor()&&!this.wasOnGround&&(this.groundTouchesSinceHook++,this.groundTouchesSinceHook>1&&(this.hookCombo=0)),this.wasOnGround=this.body.onFloor(),this.body.onFloor()&&(this.coyoteTimer=this.coyoteTime))}updateTimers(e){this.coyoteTimer>0&&(this.coyoteTimer-=e),this.jumpBufferTimer>0&&(this.jumpBufferTimer-=e),this.hookCooldownTimer>0&&(this.hookCooldownTimer-=e,this.hookCooldownTimer<=0&&(this.hookState="ready"))}handleMovement(){if(this.hookState==="attached")return;const e=this.cursors.left.isDown||this.keys.a.isDown,t=this.cursors.right.isDown||this.keys.d.isDown;e?(this.setVelocityX(-this.moveSpeed),this.facingRight=!1,this.setFlipX(!0)):t?(this.setVelocityX(this.moveSpeed),this.facingRight=!0,this.setFlipX(!1)):this.setVelocityX(0),this.body.onFloor()&&(e||t)&&Math.random()<.1&&(this.dustEmitter.setPosition(this.x,this.y+8),this.dustEmitter.explode(1))}handleJump(e){const t=r.Input.Keyboard.JustDown(this.cursors.up)||r.Input.Keyboard.JustDown(this.keys.w)||r.Input.Keyboard.JustDown(this.keys.space),i=this.cursors.up.isDown||this.keys.w.isDown||this.keys.space.isDown;t&&(this.jumpBufferTimer=this.jumpBufferTime);const s=this.body.onFloor()||this.coyoteTimer>0;this.jumpBufferTimer>0&&s&&!this.isJumping&&(this.setVelocityY(this.jumpForce),this.isJumping=!0,this.jumpHoldTime=0,this.coyoteTimer=0,this.jumpBufferTimer=0,this.dustEmitter.setPosition(this.x,this.y+8),this.dustEmitter.explode(3),this.sound.playJump()),this.isJumping&&i&&this.jumpHoldTime<this.maxJumpHoldTime&&(this.jumpHoldTime+=e,this.body.velocity.y<0&&(this.body.velocity.y*=.98)),this.isJumping&&!i&&this.body.velocity.y<-100&&(this.body.velocity.y*=.5,this.isJumping=!1),this.body.onFloor()&&(this.isJumping=!1)}handleHookAiming(){const e=this.gameScene.input.activePointer,t=this.gameScene.cameras.main.getWorldPoint(e.x,e.y),i=t.x-this.x,s=t.y-this.y;let o=0,a=0;(this.cursors.left.isDown||this.keys.a.isDown)&&(o=-1),(this.cursors.right.isDown||this.keys.d.isDown)&&(o=1),(this.cursors.up.isDown||this.keys.w.isDown)&&(a=-1),(this.cursors.down.isDown||this.keys.s.isDown)&&(a=1),o!==0||a!==0?this.hookDirection.set(o,a).normalize():Math.abs(i)>10||Math.abs(s)>10?this.hookDirection.set(i,s).normalize():this.hookDirection.set(this.facingRight?1:-1,-.5).normalize()}fireHook(){if(this.hookState!=="ready"||this.isDead)return;const e=this.gameScene.hookPoints;if(!e||e.getLength()===0)return;let t=null,i=this.hookMaxLength;if(e.getChildren().forEach(s=>{const o=r.Math.Distance.Between(this.x,this.y,s.x,s.y);if(o<i){const a=new r.Math.Vector2(s.x-this.x,s.y-this.y).normalize();this.hookDirection.dot(a)>.3&&(i=o,t=s)}}),t){this.hookState="firing",this.hookTarget=t,this.sound.playHookFire(),this.hookProjectile=this.gameScene.add.image(this.x,this.y,"hook_projectile"),this.hookProjectile.setDepth(10);const s=r.Math.Angle.Between(this.x,this.y,t.x,t.y);this.hookProjectile.setRotation(s);const o=i/this.hookSpeed*1e3;this.gameScene.tweens.add({targets:this.hookProjectile,x:t.x,y:t.y,duration:o,onComplete:()=>{this.hookState="attached",t.setTexture("hook_point_highlight"),this.sound.playHookAttach()}})}}updateHook(e){if(this.hookLineGraphics.clear(),this.hookState==="firing"&&this.hookProjectile&&(this.hookLineGraphics.lineStyle(2,9127187),this.hookLineGraphics.beginPath(),this.hookLineGraphics.moveTo(this.x,this.y),this.hookLineGraphics.lineTo(this.hookProjectile.x,this.hookProjectile.y),this.hookLineGraphics.strokePath()),this.hookState==="attached"&&this.hookTarget){this.hookLineGraphics.lineStyle(2,9127187),this.hookLineGraphics.beginPath(),this.hookLineGraphics.moveTo(this.x,this.y),this.hookLineGraphics.lineTo(this.hookTarget.x,this.hookTarget.y),this.hookLineGraphics.strokePath();const t=this.hookTarget.x-this.x,i=this.hookTarget.y-this.y,s=Math.sqrt(t*t+i*i);if(s>16){const o=t/s*this.pullSpeed,a=i/s*this.pullSpeed;this.setVelocity(o,a),this.body.setGravityY(-600)}else this.completeHook()}else this.body.setGravityY(0)}completeHook(){this.setVelocity(this.body.velocity.x*.5,-150),this.groundTouchesSinceHook<=1&&(this.hookCombo++,window.gameState.hookCombo=Math.max(window.gameState.hookCombo,this.hookCombo)),this.groundTouchesSinceHook=0,this.cancelHook()}cancelHook(){this.hookTarget&&this.hookTarget.setTexture("hook_point"),this.hookProjectile&&(this.hookProjectile.destroy(),this.hookProjectile=null),this.hookTarget=null,this.hookState="cooldown",this.hookCooldownTimer=this.hookCooldown,this.hookLineGraphics.clear(),this.body.setGravityY(0)}updateAnimation(){if(this.isDead||this.isHurt){this.setTexture("cat_hurt");return}if(this.hookState==="attached"||this.hookState==="firing"){this.setTexture("cat_hook");return}if(!this.body.onFloor())this.body.velocity.y<0?this.setTexture("cat_jump"):this.setTexture("cat_fall");else if(Math.abs(this.body.velocity.x)>10){const e=Math.floor(this.gameScene.time.now/150)%2;this.setTexture(`cat_run_${e}`)}else this.setTexture("cat_idle")}hurt(){this.isDead||this.isHurt||(this.isHurt=!0,this.cancelHook(),this.sound.playHurt(),this.setVelocity(this.facingRight?-100:100,-200),this.gameScene.tweens.add({targets:this,alpha:.5,duration:100,yoyo:!0,repeat:3,onComplete:()=>{this.alpha=1,this.isHurt=!1}}))}die(){this.isDead||(this.isDead=!0,this.cancelHook(),this.setVelocity(0,-200),this.sound.playDeath(),this.gameScene.tweens.add({targets:this,alpha:0,y:this.y-50,duration:500,onComplete:()=>{this.gameScene.respawnPlayer()}}))}respawn(e,t){this.setPosition(e,t),this.setVelocity(0,0),this.isDead=!1,this.isHurt=!1,this.alpha=1,this.hookState="ready",this.hookCombo=0,this.groundTouchesSinceHook=0}destroy(){this.hookLineGraphics.destroy(),this.dustEmitter.destroy(),super.destroy()}}class z extends r.Physics.Arcade.Sprite{constructor(e,t,i,s="slime"){const o=s==="slime"?"enemy_slime_0":"enemy_bug_0";super(e,t,i,o),e.add.existing(this),e.physics.add.existing(this),this.type=s,this.moveSpeed=s==="slime"?30:50,this.direction=1,this.patrolDistance=80,this.startX=t,this.body.setSize(14,12),this.body.setOffset(1,4),this.setCollideWorldBounds(!0),this.animTimer=0,this.animFrame=0}update(e,t){this.setVelocityX(this.moveSpeed*this.direction),this.x>this.startX+this.patrolDistance?(this.direction=-1,this.setFlipX(!0)):this.x<this.startX-this.patrolDistance&&(this.direction=1,this.setFlipX(!1)),this.body.blocked.left?(this.direction=1,this.setFlipX(!1)):this.body.blocked.right&&(this.direction=-1,this.setFlipX(!0)),this.animTimer+=t,this.animTimer>300&&(this.animTimer=0,this.animFrame=(this.animFrame+1)%2,this.setTexture(`enemy_${this.type}_${this.animFrame}`))}}const F=[{name:"First Steps",parTime:30,map:`
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
..r..r..r..r..r..r..r..r..r..r..r..r..r..r..r.............
.@#######..#######..#######..#######..#######..F..........
##DDDDDD####DDDDDD##DDDDDD####DDDDDD##DDDDDD####DDDDDDDDD#
`,tips:["Use A/D to move, SPACE to jump","Collect the raindrops!","Reach the flag to complete the level"]},{name:"Learning to Hook",parTime:45,map:`
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
......................H...................................
..r..r..r..r..r..r..r.......r..r..r..r..r..r..............
.@#######..########.........########..#######..F..........
##DDDDDD####DDDDDDD.........DDDDDDD####DDDDDD###DDDDDDDDDD
`,tips:["Press E or click to fire your hook","Aim at the golden ring ABOVE THE GAP!","The hook swings you across to safety"]},{name:"Chain Hooks",parTime:60,map:`
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
......................H...............H...................
..r..r..r..r..r..r..r.......r..r..r.......r..r..r..r......
.@#######..########.........#######.........########..F...
##DDDDDD####DDDDDDD.........DDDDDD..........DDDDDDD####DDD
`,tips:["Chain multiple hooks!","Each hook is positioned over the gap","Build momentum for longer swings"]},{name:"Danger Zone",parTime:75,map:`
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
........................H.................H...............
..r..r..r..r..r..r..r.........r..r..r.........r..r..r.....
.@#######..##########.........########1.......########..F.
##DDDDDD####DDDDDDDD..........DDDDDDD.........DDDDDDD###DD
`,tips:["Watch out for enemies!","Jump on them from above to defeat them","Hooks are always over the gaps"]},{name:"Final Challenge",parTime:90,map:`
..........................................................
..........................................................
..........................................................
..........................................................
..........................................................
.....................H..............H..............H......
..........................................................
..r..r..r..r..r..r.........r..r..r.........r..r..r........
.@#######..########.........#######..........#######....F.
##DDDDDD####DDDDDDD.........DDDDDD...........DDDDDD.....##
`,tips:["This is the final challenge!","Three gaps, three hooks - all over the chasms!","Use all your skills to reach the end"]}];function P(p){const e=F[p];if(!e)return null;const t=e.map.trim().split(`
`),i=16,s={name:e.name,parTime:e.parTime,tips:e.tips,width:0,height:t.length*i,playerStart:{x:32,y:32},ground:[],platforms:[],spikes:[],hookPoints:[],checkpoints:[],finish:null,raindrops:[],secrets:[],enemies:[]};return t.forEach((o,a)=>{s.width=Math.max(s.width,o.length*i);for(let l=0;l<o.length;l++){const h=o[l],n=l*i+i/2,c=a*i+i/2;switch(h){case"#":s.ground.push({x:n,y:c,type:"ground"});break;case"D":s.ground.push({x:n,y:c,type:"dirt"});break;case"S":s.ground.push({x:n,y:c,type:"stone"});break;case"P":s.platforms.push({x:n,y:c});break;case"^":s.spikes.push({x:n,y:c});break;case"H":s.hookPoints.push({x:n,y:c});break;case"C":s.checkpoints.push({x:n,y:c});break;case"F":s.finish={x:n,y:c};break;case"@":s.playerStart={x:n,y:c};break;case"r":s.raindrops.push({x:n,y:c});break;case"*":s.secrets.push({x:n,y:c});break;case"1":s.enemies.push({x:n,y:c,type:"slime"});break;case"2":s.enemies.push({x:n,y:c,type:"bug"});break}}}),s}class O extends r.Scene{constructor(){super({key:"GameScene"})}create(){if(this.currentLevel=window.gameState.currentLevel,this.levelData=P(this.currentLevel-1),!this.levelData){console.error("Level not found:",this.currentLevel),this.scene.start("MenuScene");return}this.sound=x(this),this.levelStartTime=this.time.now,this.dropsCollected=0,this.secretsCollected=0,this.totalDrops=0,this.totalSecrets=0,this.isPaused=!1,this.physics.world.setBounds(0,0,this.levelData.width,this.levelData.height),this.createBackground(),this.createGround(),this.createPlatforms(),this.createSpikes(),this.createHookPoints(),this.createCheckpoints(),this.createFinish(),this.createCollectibles(),this.createEnemies(),this.spawnPoint={...this.levelData.playerStart},this.player=new R(this,this.spawnPoint.x,this.spawnPoint.y),this.setupCollisions(),this.setupCamera(),this.scene.launch("UIScene"),this.time.delayedCall(100,()=>{this.events.emit("collectDrop",this.dropsCollected,this.totalDrops),this.events.emit("collectSecret",this.secretsCollected,this.totalSecrets)}),this.setupInput(),this.showLevelIntro()}createBackground(){const e=Math.ceil(this.levelData.width/64)+2,t=Math.ceil(this.levelData.height/64)+2;for(let s=0;s<e;s++)for(let o=0;o<t;o++)this.add.image(s*64,o*64,"bg_sky").setOrigin(0,0).setScrollFactor(.5).setDepth(-10);const i=this.add.graphics();i.fillGradientStyle(8900331,8900331,4881443,4881443,1),i.fillRect(0,0,this.cameras.main.width,this.cameras.main.height),i.setScrollFactor(0),i.setDepth(-9),i.setAlpha(.3)}createGround(){this.ground=this.physics.add.staticGroup(),this.levelData.ground.forEach(e=>{const t=`tile_${e.type}`,i=this.ground.create(e.x,e.y,t);i.setOrigin(.5,.5),i.refreshBody()})}createPlatforms(){this.platforms=this.physics.add.staticGroup(),this.levelData.platforms.forEach(e=>{const t=this.platforms.create(e.x,e.y,"tile_platform");t.setOrigin(.5,.5),t.body.checkCollision.down=!1,t.body.checkCollision.left=!1,t.body.checkCollision.right=!1,t.refreshBody()})}createSpikes(){this.spikes=this.physics.add.staticGroup(),this.levelData.spikes.forEach(e=>{const t=this.spikes.create(e.x,e.y,"tile_spike");t.setOrigin(.5,.5),t.body.setSize(14,8),t.body.setOffset(1,8),t.refreshBody()})}createHookPoints(){this.hookPoints=this.physics.add.staticGroup(),this.levelData.hookPoints.forEach(e=>{const t=this.hookPoints.create(e.x,e.y,"hook_point");t.setOrigin(.5,.5),this.tweens.add({targets:t,y:e.y-4,duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})})}createCheckpoints(){this.checkpoints=this.physics.add.staticGroup(),this.activeCheckpoints=new Set,this.levelData.checkpoints.forEach((e,t)=>{const i=this.checkpoints.create(e.x,e.y-4,"checkpoint");i.setOrigin(.5,1),i.checkpointIndex=t,i.refreshBody()})}createFinish(){this.levelData.finish&&(this.finish=this.physics.add.staticImage(this.levelData.finish.x,this.levelData.finish.y-8,"finish"),this.finish.setOrigin(.5,1),this.finish.refreshBody(),this.tweens.add({targets:this.finish,scaleX:1.05,duration:500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}))}createCollectibles(){this.raindrops=this.physics.add.group(),this.levelData.raindrops.forEach(e=>{const t=this.raindrops.create(e.x,e.y,"raindrop");t.body.setAllowGravity(!1),t.setOrigin(.5,.5),this.tweens.add({targets:t,y:e.y-4,duration:1e3+Math.random()*500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.totalDrops++}),this.secrets=this.physics.add.group(),this.levelData.secrets.forEach(e=>{const t=this.secrets.create(e.x,e.y,"secret_star");t.body.setAllowGravity(!1),t.setOrigin(.5,.5),this.tweens.add({targets:t,angle:360,duration:3e3,repeat:-1}),this.tweens.add({targets:t,alpha:.6,duration:500,yoyo:!0,repeat:-1}),this.totalSecrets++})}createEnemies(){this.enemies=this.physics.add.group(),this.levelData.enemies.forEach(e=>{const t=new z(this,e.x,e.y,e.type);this.enemies.add(t)})}setupCollisions(){this.physics.add.collider(this.player,this.ground),this.physics.add.collider(this.player,this.platforms),this.physics.add.collider(this.enemies,this.ground),this.physics.add.overlap(this.player,this.spikes,this.hitSpikes,null,this),this.physics.add.overlap(this.player,this.enemies,this.hitEnemy,null,this),this.physics.add.overlap(this.player,this.checkpoints,this.activateCheckpoint,null,this),this.finish&&this.physics.add.overlap(this.player,this.finish,this.reachFinish,null,this),this.physics.add.overlap(this.player,this.raindrops,this.collectRaindrop,null,this),this.physics.add.overlap(this.player,this.secrets,this.collectSecret,null,this)}setupCamera(){this.cameras.main.setBounds(0,0,this.levelData.width,this.levelData.height),this.cameras.main.startFollow(this.player,!0,.1,.1),this.cameras.main.setDeadzone(64,32),this.cameras.main.setZoom(1)}setupInput(){this.input.keyboard.on("keydown-ESC",()=>{this.togglePause()}),this.input.keyboard.on("keydown-R",()=>{this.restartLevel()})}showLevelIntro(){const{width:e,height:t}=this.cameras.main,i=this.add.rectangle(e/2,t/2,e,t,0,.7).setScrollFactor(0).setDepth(100),s=this.add.text(e/2,t/2-20,`Level ${this.currentLevel}`,{fontSize:"32px",fontFamily:"monospace",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(101),o=this.add.text(e/2,t/2+20,this.levelData.name,{fontSize:"24px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5).setScrollFactor(0).setDepth(101);this.time.delayedCall(1500,()=>{this.tweens.add({targets:[i,s,o],alpha:0,duration:500,onComplete:()=>{i.destroy(),s.destroy(),o.destroy()}})})}togglePause(){this.isPaused=!this.isPaused,this.isPaused?(this.physics.pause(),this.scene.launch("PauseScene")):(this.physics.resume(),this.scene.stop("PauseScene"))}hitSpikes(e,t){e.isDead||e.isHurt||e.die()}hitEnemy(e,t){e.isDead||e.isHurt||(e.body.velocity.y>0&&e.y<t.y-8?(t.destroy(),e.setVelocityY(-200),this.sound.playStomp(),this.add.particles(t.x,t.y,"particle_sparkle",{speed:100,scale:{start:1,end:0},lifespan:300,quantity:5}).explode()):e.hurt())}activateCheckpoint(e,t){this.activeCheckpoints.has(t.checkpointIndex)||(this.activeCheckpoints.add(t.checkpointIndex),this.spawnPoint={x:t.x,y:t.y-16},t.setTexture("checkpoint_active"),this.sound.playCheckpoint(),this.add.particles(t.x,t.y-12,"particle_sparkle",{speed:50,scale:{start:1,end:0},lifespan:500,quantity:10,emitting:!1}).explode())}reachFinish(e,t){if(this.levelComplete)return;this.levelComplete=!0;const i=Math.floor((this.time.now-this.levelStartTime)/1e3),s=this.levelData.parTime;let o=0;i<s*.75?o=1e3:i<s&&(o=500);const a=window.gameState.hookCombo*50,l=this.dropsCollected*10+this.secretsCollected*100+o+a;window.gameState.levelStats.push({level:this.currentLevel,time:i,drops:this.dropsCollected,totalDrops:this.totalDrops,secrets:this.secretsCollected,totalSecrets:this.totalSecrets,score:l,hookCombo:window.gameState.hookCombo}),window.gameState.score+=l,window.gameState.totalDrops+=this.dropsCollected,window.gameState.totalSecrets+=this.secretsCollected,this.sound.playLevelComplete(),e.setVelocity(0,0),e.body.setAllowGravity(!1),this.tweens.add({targets:e,y:e.y-20,duration:500,yoyo:!0,repeat:2,onComplete:()=>{this.scene.stop("UIScene"),this.scene.start("LevelCompleteScene",{level:this.currentLevel,time:i,parTime:s,drops:this.dropsCollected,totalDrops:this.totalDrops,secrets:this.secretsCollected,totalSecrets:this.totalSecrets,score:l,hookCombo:window.gameState.hookCombo})}})}collectRaindrop(e,t){t.destroy(),this.dropsCollected++,this.add.particles(t.x,t.y,"particle_sparkle",{speed:50,scale:{start:1,end:0},lifespan:300,quantity:3,tint:49151}).explode(),this.sound.playCollect(),this.events.emit("collectDrop",this.dropsCollected,this.totalDrops)}collectSecret(e,t){t.destroy(),this.secretsCollected++,this.add.particles(t.x,t.y,"particle_sparkle",{speed:80,scale:{start:1.5,end:0},lifespan:500,quantity:8,tint:16766720}).explode(),this.sound.playSecret(),this.events.emit("collectSecret",this.secretsCollected,this.totalSecrets)}respawnPlayer(){this.player.respawn(this.spawnPoint.x,this.spawnPoint.y),window.gameState.hookCombo=0}restartLevel(){this.scene.stop("UIScene"),window.gameState.hookCombo=0,this.scene.restart()}update(e,t){if(this.isPaused)return;this.player&&!this.player.isDead&&this.player.update(e,t),this.enemies.getChildren().forEach(s=>{s.update(e,t)}),this.player&&this.player.y>this.levelData.height+100&&this.player.die();const i=Math.floor((e-this.levelStartTime)/1e3);this.events.emit("updateTime",i)}}class G extends r.Scene{constructor(){super({key:"UIScene"})}create(){const{width:e}=this.cameras.main;this.timeText=this.add.text(16,16,"Time: 0",{fontSize:"16px",fontFamily:"monospace",color:"#ffffff",stroke:"#000000",strokeThickness:3}),this.dropsIcon=this.add.image(16,48,"raindrop").setOrigin(0,.5).setScale(1.5),this.dropsText=this.add.text(36,48,"0 / 0",{fontSize:"16px",fontFamily:"monospace",color:"#00bfff",stroke:"#000000",strokeThickness:3}).setOrigin(0,.5),this.secretsIcon=this.add.image(16,76,"secret_star").setOrigin(0,.5).setScale(1),this.secretsText=this.add.text(36,76,"0 / 0",{fontSize:"16px",fontFamily:"monospace",color:"#ffd700",stroke:"#000000",strokeThickness:3}).setOrigin(0,.5),this.levelText=this.add.text(e-16,16,`Level ${window.gameState.currentLevel}`,{fontSize:"16px",fontFamily:"monospace",color:"#ffd700",stroke:"#000000",strokeThickness:3}).setOrigin(1,0),this.hookIndicator=this.add.graphics(),this.hookIndicator.setPosition(e-40,50),this.drawHookIndicator(1),this.comboText=this.add.text(e-16,80,"",{fontSize:"14px",fontFamily:"monospace",color:"#ff6600",stroke:"#000000",strokeThickness:2}).setOrigin(1,0),this.controlsHint=this.add.text(e/2,this.cameras.main.height-20,"E or Click to Hook | ESC to Pause | R to Restart",{fontSize:"12px",fontFamily:"monospace",color:"#888888"}).setOrigin(.5),this.tweens.add({targets:this.controlsHint,alpha:0,delay:5e3,duration:1e3});const t=this.scene.get("GameScene");t.events.on("updateTime",i=>{this.timeText.setText(`Time: ${i}s`)}),t.events.on("collectDrop",(i,s)=>{this.dropsText.setText(`${i} / ${s}`),this.pulseElement(this.dropsText)}),t.events.on("collectSecret",(i,s)=>{this.secretsText.setText(`${i} / ${s}`),this.pulseElement(this.secretsText)}),this.time.addEvent({delay:100,callback:()=>{const i=window.gameState.hookCombo;i>1?(this.comboText.setText(`Combo x${i}!`),this.comboText.setAlpha(1)):this.comboText.setAlpha(0)},loop:!0})}drawHookIndicator(e){this.hookIndicator.clear(),this.hookIndicator.fillStyle(3355443,.8),this.hookIndicator.fillCircle(0,0,16),e<1?(this.hookIndicator.fillStyle(16737792,1),this.hookIndicator.slice(0,0,14,-Math.PI/2,-Math.PI/2+e*Math.PI*2,!0),this.hookIndicator.fillPath()):(this.hookIndicator.fillStyle(65280,1),this.hookIndicator.fillCircle(0,0,14)),this.hookIndicator.fillStyle(16777215,1),this.hookIndicator.fillCircle(0,0,6)}pulseElement(e){this.tweens.add({targets:e,scaleX:1.3,scaleY:1.3,duration:100,yoyo:!0})}update(){}}class E extends r.Scene{constructor(){super({key:"LevelCompleteScene"})}init(e){this.levelData=e}create(){const{width:e,height:t}=this.cameras.main;this.cameras.main.setBackgroundColor(1710638),this.add.text(e/2,40,"LEVEL COMPLETE!",{fontSize:"32px",fontFamily:"monospace",color:"#ffd700",stroke:"#000000",strokeThickness:4}).setOrigin(.5),this.add.text(e/2,75,`Level ${this.levelData.level}`,{fontSize:"20px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);const i=120,s=30,o=this.levelData.time<this.levelData.parTime?"#00ff00":"#ffffff";this.add.text(e/2-100,i,"Time:",{fontSize:"18px",fontFamily:"monospace",color:"#aaaaaa"}),this.add.text(e/2+100,i,`${this.levelData.time}s`,{fontSize:"18px",fontFamily:"monospace",color:o}).setOrigin(1,0),this.add.text(e/2-100,i+s,"Par Time:",{fontSize:"16px",fontFamily:"monospace",color:"#666666"}),this.add.text(e/2+100,i+s,`${this.levelData.parTime}s`,{fontSize:"16px",fontFamily:"monospace",color:"#666666"}).setOrigin(1,0),this.add.text(e/2-100,i+s*2,"Raindrops:",{fontSize:"18px",fontFamily:"monospace",color:"#00bfff"}),this.add.text(e/2+100,i+s*2,`${this.levelData.drops} / ${this.levelData.totalDrops}`,{fontSize:"18px",fontFamily:"monospace",color:"#00bfff"}).setOrigin(1,0),this.add.text(e/2-100,i+s*3,"Secrets:",{fontSize:"18px",fontFamily:"monospace",color:"#ffd700"}),this.add.text(e/2+100,i+s*3,`${this.levelData.secrets} / ${this.levelData.totalSecrets}`,{fontSize:"18px",fontFamily:"monospace",color:"#ffd700"}).setOrigin(1,0),this.levelData.hookCombo>1&&(this.add.text(e/2-100,i+s*4,"Best Combo:",{fontSize:"18px",fontFamily:"monospace",color:"#ff6600"}),this.add.text(e/2+100,i+s*4,`x${this.levelData.hookCombo}`,{fontSize:"18px",fontFamily:"monospace",color:"#ff6600"}).setOrigin(1,0)),this.add.text(e/2,i+s*5.5,"SCORE",{fontSize:"24px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);const a=this.add.text(e/2,i+s*6.5,this.levelData.score.toString(),{fontSize:"36px",fontFamily:"monospace",color:"#ffd700"}).setOrigin(.5);this.tweens.add({targets:a,scaleX:1.2,scaleY:1.2,duration:500,yoyo:!0,repeat:1}),window.gameState.currentLevel>=window.gameState.totalLevels?this.createButton(e/2,t-60,"VIEW RESULTS",()=>{this.scene.start("GameOverScene")}):this.createButton(e/2,t-60,"NEXT LEVEL",()=>{window.gameState.currentLevel++,window.gameState.hookCombo=0,this.scene.start("GameScene")}),this.createButton(e/2,t-110,"RETRY",()=>{window.gameState.levelStats.pop(),window.gameState.score-=this.levelData.score,window.gameState.totalDrops-=this.levelData.drops,window.gameState.totalSecrets-=this.levelData.secrets,window.gameState.hookCombo=0,this.scene.start("GameScene")});for(let h=0;h<20;h++){const n=this.add.image(r.Math.Between(50,e-50),r.Math.Between(50,t-50),"particle_sparkle").setAlpha(.5).setScale(r.Math.FloatBetween(.5,1.5));this.tweens.add({targets:n,y:n.y-20,alpha:0,duration:r.Math.Between(1e3,2e3),repeat:-1,onRepeat:()=>{n.x=r.Math.Between(50,e-50),n.y=r.Math.Between(50,t-50),n.alpha=.5}})}}createButton(e,t,i,s){const o=this.add.image(e,t,"button").setInteractive(),a=this.add.text(e,t,i,{fontSize:"18px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);return o.on("pointerover",()=>{o.setTexture("button_hover"),a.setColor("#ffd700")}),o.on("pointerout",()=>{o.setTexture("button"),a.setColor("#ffffff")}),o.on("pointerdown",s),{button:o,buttonText:a}}}class L extends r.Scene{constructor(){super({key:"GameOverScene"})}create(){const{width:e,height:t}=this.cameras.main;this.cameras.main.setBackgroundColor(1710638),this.add.text(e/2,30,"CONGRATULATIONS!",{fontSize:"32px",fontFamily:"monospace",color:"#ffd700",stroke:"#000000",strokeThickness:4}).setOrigin(.5),this.add.text(e/2,60,"You completed all levels!",{fontSize:"16px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);const i=this.add.image(e/2,100,"cat_idle").setScale(4);this.tweens.add({targets:i,y:90,duration:500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});const s=window.gameState.levelStats,o=140,a=22;this.add.text(60,o,"LVL",{fontSize:"14px",fontFamily:"monospace",color:"#888888"}),this.add.text(120,o,"TIME",{fontSize:"14px",fontFamily:"monospace",color:"#888888"}),this.add.text(200,o,"DROPS",{fontSize:"14px",fontFamily:"monospace",color:"#888888"}),this.add.text(300,o,"STARS",{fontSize:"14px",fontFamily:"monospace",color:"#888888"}),this.add.text(400,o,"SCORE",{fontSize:"14px",fontFamily:"monospace",color:"#888888"}),s.forEach((d,m)=>{const y=o+(m+1)*a;this.add.text(60,y,d.level.toString(),{fontSize:"14px",fontFamily:"monospace",color:"#ffffff"}),this.add.text(120,y,`${d.time}s`,{fontSize:"14px",fontFamily:"monospace",color:"#ffffff"}),this.add.text(200,y,`${d.drops}/${d.totalDrops}`,{fontSize:"14px",fontFamily:"monospace",color:"#00bfff"}),this.add.text(300,y,`${d.secrets}/${d.totalSecrets}`,{fontSize:"14px",fontFamily:"monospace",color:"#ffd700"}),this.add.text(400,y,d.score.toString(),{fontSize:"14px",fontFamily:"monospace",color:"#ffffff"})});const l=o+(s.length+1.5)*a;this.add.text(60,l,"TOTAL",{fontSize:"16px",fontFamily:"monospace",color:"#ffd700"});const h=s.reduce((d,m)=>d+m.time,0);this.add.text(120,l,`${h}s`,{fontSize:"16px",fontFamily:"monospace",color:"#ffd700"});const n=s.reduce((d,m)=>d+m.drops,0),c=s.reduce((d,m)=>d+m.totalDrops,0);this.add.text(200,l,`${n}/${c}`,{fontSize:"16px",fontFamily:"monospace",color:"#00bfff"});const f=s.reduce((d,m)=>d+m.secrets,0),u=s.reduce((d,m)=>d+m.totalSecrets,0);this.add.text(300,l,`${f}/${u}`,{fontSize:"16px",fontFamily:"monospace",color:"#ffd700"}),this.add.text(e/2,t-100,"FINAL SCORE",{fontSize:"20px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);const g=this.add.text(e/2,t-70,window.gameState.score.toString(),{fontSize:"40px",fontFamily:"monospace",color:"#ffd700"}).setOrigin(.5);this.tweens.add({targets:g,scaleX:1.1,scaleY:1.1,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.createButton(e/2,t-25,"PLAY AGAIN",()=>{window.gameState.currentLevel=1,window.gameState.score=0,window.gameState.totalDrops=0,window.gameState.totalSecrets=0,window.gameState.levelStats=[],window.gameState.hookCombo=0,this.scene.start("MenuScene")}),this.time.addEvent({delay:500,callback:()=>{const d=r.Math.Between(50,e-50);this.add.particles(d,t,"particle_sparkle",{speed:{min:100,max:200},angle:{min:250,max:290},scale:{start:1,end:0},lifespan:1e3,quantity:5,tint:[16766720,49151,16737792]}).explode()},repeat:-1})}createButton(e,t,i,s){const o=this.add.image(e,t,"button").setInteractive(),a=this.add.text(e,t,i,{fontSize:"18px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);return o.on("pointerover",()=>{o.setTexture("button_hover"),a.setColor("#ffd700")}),o.on("pointerout",()=>{o.setTexture("button"),a.setColor("#ffffff")}),o.on("pointerdown",s),{button:o,buttonText:a}}}class H extends r.Scene{constructor(){super({key:"ControlsScene"})}create(){const{width:e,height:t}=this.cameras.main;this.cameras.main.setBackgroundColor(1710638),this.add.text(e/2,40,"CONTROLS",{fontSize:"36px",fontFamily:"monospace",color:"#ffd700",stroke:"#000000",strokeThickness:4}).setOrigin(.5);const i=[{key:"A / D  or  ← / →",action:"Move Left / Right"},{key:"SPACE  or  W / ↑",action:"Jump"},{key:"E  or  Left Click",action:"Fire Grappling Hook"},{key:"Arrow Keys / Mouse",action:"Aim Hook Direction"},{key:"E again  or  Right Click",action:"Cancel Hook"},{key:"ESC",action:"Pause Game"},{key:"R",action:"Restart Level"}],s=90,o=35;i.forEach((l,h)=>{const n=s+h*o;this.add.text(e/2-20,n,l.key,{fontSize:"14px",fontFamily:"monospace",color:"#ffd700"}).setOrigin(1,.5),this.add.text(e/2,n,":",{fontSize:"14px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5,.5),this.add.text(e/2+20,n,l.action,{fontSize:"14px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(0,.5)}),this.add.text(e/2,280,"TIPS",{fontSize:"24px",fontFamily:"monospace",color:"#ffd700"}).setOrigin(.5),["• Look for golden hook points to grapple","• Chain hooks without touching ground for combos","• Find hidden stars for bonus points"].forEach((l,h)=>{this.add.text(e/2,305+h*20,l,{fontSize:"12px",fontFamily:"monospace",color:"#aaaaaa"}).setOrigin(.5)}),this.createButton(e/2,t-40,"BACK",()=>{this.scene.start("MenuScene")}),this.input.keyboard.on("keydown-ESC",()=>{this.scene.start("MenuScene")})}createButton(e,t,i,s){const o=this.add.image(e,t,"button").setInteractive(),a=this.add.text(e,t,i,{fontSize:"20px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);return o.on("pointerover",()=>{o.setTexture("button_hover"),a.setColor("#ffd700")}),o.on("pointerout",()=>{o.setTexture("button"),a.setColor("#ffffff")}),o.on("pointerdown",s),{button:o,buttonText:a}}}class I extends r.Scene{constructor(){super({key:"PauseScene"})}create(){const{width:e,height:t}=this.cameras.main;this.add.rectangle(e/2,t/2,e,t,0,.7),this.add.text(e/2,80,"PAUSED",{fontSize:"40px",fontFamily:"monospace",color:"#ffd700",stroke:"#000000",strokeThickness:4}).setOrigin(.5),this.createButton(e/2,160,"RESUME",()=>{this.resumeGame()}),this.createButton(e/2,210,"RESTART",()=>{this.scene.stop("UIScene"),this.scene.stop("GameScene"),window.gameState.hookCombo=0,this.scene.start("GameScene")}),this.createButton(e/2,260,"MAIN MENU",()=>{this.scene.stop("UIScene"),this.scene.stop("GameScene"),this.scene.start("MenuScene")}),this.input.keyboard.on("keydown-ESC",()=>{this.resumeGame()}),this.add.text(e/2,t-40,`Level ${window.gameState.currentLevel}`,{fontSize:"16px",fontFamily:"monospace",color:"#888888"}).setOrigin(.5)}resumeGame(){const e=this.scene.get("GameScene");e.isPaused=!1,e.physics.resume(),this.scene.stop()}createButton(e,t,i,s){const o=this.add.image(e,t,"button").setInteractive(),a=this.add.text(e,t,i,{fontSize:"18px",fontFamily:"monospace",color:"#ffffff"}).setOrigin(.5);return o.on("pointerover",()=>{o.setTexture("button_hover"),a.setColor("#ffd700")}),o.on("pointerout",()=>{o.setTexture("button"),a.setColor("#ffffff")}),o.on("pointerdown",s),{button:o,buttonText:a}}}const B={type:r.AUTO,width:640,height:360,parent:"game-container",pixelArt:!0,roundPixels:!0,physics:{default:"arcade",arcade:{gravity:{y:800},debug:!1}},scale:{mode:r.Scale.FIT,autoCenter:r.Scale.CENTER_BOTH},scene:[w,C,v,O,G,E,L,H,I]},_=new r.Game(B);window.game=_;window.gameState={currentLevel:1,totalLevels:5,score:0,totalDrops:0,totalSecrets:0,levelStats:[],hookCombo:0};
